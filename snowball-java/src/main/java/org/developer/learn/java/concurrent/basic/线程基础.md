### 一、线程基础
- 进程和线程

进程是操作系统资源调度的基本单元、线程是执行的基本单元，一个进程可包括多个线程，同一个进程中的线程共享进程资源。Java中Thread类及其子类的一个实例就对应一个线程。
- 实现线程的方式
    - 集成Thread类
    - 实现Runnable接口（推荐）
> 线程属于"一次性"用品，start方法仅能调用一次,多次调用会抛出异常。线程run方法由虚拟机调用，应用程序不可直接调用。

- 线程API
    - join
      若线程A调用线程B的join方法，则A线程将暂停等待，直到线程B完成，具有超时的join方法
    - yield
      线程调用yield方法将让出对处理器对调用，但让出CPU后仍有可能被再次调用

- 线程的层次
线程间的父子关系即被称之为线程的层次关系，Java平台中，一个线程是否是一个守护线程及其线程优先级与其父线程相同。

- 线程生命周期
线程状态转换详见src/main/resources/images/lifecircle.png

### 二、多线程挑战
- 竞态
程序输出但结果依赖于时间，多线程程序并发执行时，即会出现线程安全性问题。
> 局部变量，包括形式参数及方法体内定义的变量，为线程私有变量，不会产生竞态而带来线程安全性问题。

- 状态变量
类的实例变量、静态变量
- 共享变量
可由多个线程共同访问的变量称之为共享变量。
- 竞态产生模式
    - read-modify-write （读取-修改-写入）
    - check-then-act（检查然后执行）
   
- 线程安全
类在单线程环境下可以运行正常，而多线程环境下无需做任何改变也能正常运行，视为线程安全时，使用类之前必须先确定其是否是线程安全的。
    - 原子性
    - 可见性
    - 有序性
